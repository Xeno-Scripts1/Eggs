--// Xeno Visual Pet Duper UI with Held Pet Clone

-- SERVICES
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Backpack = LocalPlayer:WaitForChild("Backpack")
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- CLEANUP
if PlayerGui:FindFirstChild("XenoPetDuper") then
    PlayerGui.XenoPetDuper:Destroy()
end

-- UI CREATION
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "XenoPetDuper"
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 180)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -90)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui
MainFrame.BackgroundTransparency = 0.15
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 12)

local Title = Instance.new("TextLabel")
Title.Text = "‚ú® Xeno Pet Duper"
Title.Font = Enum.Font.GothamBold
Title.TextColor3 = Color3.fromRGB(255, 80, 80)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Position = UDim2.new(0, 0, 0, 5)
Title.TextScaled = true
Title.Parent = MainFrame

local DupeButton = Instance.new("TextButton")
DupeButton.Text = "üîÅ Dupe Equipped Pet"
DupeButton.Font = Enum.Font.Gotham
DupeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DupeButton.Size = UDim2.new(0.8, 0, 0, 45)
DupeButton.Position = UDim2.new(0.1, 0, 0.45, 0)
DupeButton.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
DupeButton.AutoButtonColor = true
DupeButton.Parent = MainFrame

local DupeUICorner = Instance.new("UICorner", DupeButton)
DupeUICorner.CornerRadius = UDim.new(0, 8)

-- Function to visually dupe pet (attach clone to right hand)
local function dupePet()
    local equippedTool = Character:FindFirstChildOfClass("Tool")
    if not equippedTool then return end

    local clone = equippedTool:Clone()
    clone.Name = equippedTool.Name .. "_VisualClone"

    local handle = clone:FindFirstChild("Handle") or clone:FindFirstChildWhichIsA("BasePart")
    if handle then
        handle.Anchored = false
        handle.CanCollide = false

        -- Parent to Character so it stays with player
        clone.Parent = Character

        -- Weld to right hand or right arm
        local hand = Character:FindFirstChild("RightHand") or Character:FindFirstChild("Right Arm")
        if hand then
            local weld = Instance.new("WeldConstraint")
            weld.Part0 = hand
            weld.Part1 = handle
            weld.Parent = handle

            handle.CFrame = hand.CFrame * CFrame.new(0, -0.5, -1)
        end
    end
end

DupeButton.MouseButton1Click:Connect(dupePet)
